<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<head th:fragment="head">
    <meta charset="UTF-8"/>
    <title th:text="${title}">Title</title>
    <link th:href="@{/css/styles.css}" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-light" th:fragment="header">
    <div class="container-fluid">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item"><a class="nav-link" href="/login" sec:authorize="!isAuthenticated()">Login</a></li>
            <li class="nav-item"><a class="nav-link" href="/register" sec:authorize="!isAuthenticated()">Register</a></li>
            <li class="nav-item"><a class="nav-link" href="/logout" sec:authorize="isAuthenticated()">Logout</a></li>
            <li class="nav-item"><a class="nav-link" href="/" sec:authorize="isAuthenticated()">Home</a></li>

            <!-- User and Roles Section -->
            <li class="nav-item"><a class="nav-link" href="/users" sec:authorize="isAuthenticated() and hasAuthority('ADMIN')">Users</a></li>
            <li class="nav-item"><a class="nav-link" href="/user" sec:authorize="isAuthenticated() and hasAuthority('USER')">User</a></li>
            <li class="nav-item"><a class="nav-link" href="/roles" sec:authorize="isAuthenticated() and hasAuthority('ADMIN')">Roles</a></li>

            <!-- Books Section -->
            <li class="nav-item"><a class="nav-link" href="/books" sec:authorize="isAuthenticated()">All Books</a></li>

            <!-- Categories Section -->
            <li class="nav-item"><a class="nav-link" href="/categories" sec:authorize="isAuthenticated()">Book Categories</a></li>

            <!-- Tags Section -->
            <li class="nav-item"><a class="nav-link" href="/tags" sec:authorize="isAuthenticated()">Tags</a></li>

            <!-- Admin Section -->
            <li class="nav-item"><a class="nav-link" href="/admin" sec:authorize="isAuthenticated()">Admin</a></li>
        </ul>
    </div>
</nav>

<div class="container mt-4" th:fragment="roles_table">
    <table class="table table-bordered">
        <thead>
        <tr>
            <th>Authority</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="role : ${roles}">
            <td th:text="${role.role}"></td>
        </tr>
        </tbody>
    </table>
</div>

<div class="container mt-4" th:fragment="users_table">
    <table class="table table-bordered">
        <thead>
        <tr>
            <th>Username</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>E-mail Address</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="user : ${users}">
            <td th:text="${user.username}"></td>
            <td th:text="${user.firstName}"></td>
            <td th:text="${user.lastName}"></td>
            <td th:text="${user.emailAddress}"></td>
        </tr>
        </tbody>
    </table>
</div>

<footer class="bg-light text-center py-3" th:fragment="footer">
    <p class="mb-0">Inginerie Software 2025</p>
</footer>
</body>
</html>
